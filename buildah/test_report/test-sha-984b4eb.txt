## Test 4

984b4eb 2021-12-03 Charles Moulliard (HEAD -> main, origin/main) Support to extract files and search about them

## Scenario

./hack/build.sh
docker run \
  --privileged \
  -e GRAPH_DRIVER=vfs \
  -e WORKSPACE_DIR=/wks \
  -e DOCKERFILE_NAME="Dockerfile-1" \
  -e EXTRACT_LAYERS=true \
  -e FILES_TO_SEARCH="good.txt" \
  -e LOGGING_LEVEL=debug \
  -v $(pwd)/wks:/wks \
  -v $(pwd)/cache:/cache \
  -it buildah-app >> ./test_report/test-sha-984b4eb.txt


## Dockerfile

FROM registry.access.redhat.com/ubi8

RUN echo "Good" > good.txt

RUN echo "Bye" > bye.txt

## Report

time="2021-12-03T12:30:39Z" level=debug msg="EXTRACT_LAYERS=true"
time="2021-12-03T12:30:39Z" level=info msg="The layered tar-GZip files will be extracted to the home dir ..."
time="2021-12-03T12:30:39Z" level=debug msg="FILES_TO_SEARCH=good.txt"
time="2021-12-03T12:30:39Z" level=info msg="WORKSPACE DIR: /wks"
time="2021-12-03T12:30:39Z" level=info msg="GRAPH_DRIVER: vfs"
time="2021-12-03T12:30:39Z" level=info msg="STORAGE ROOT PATH: /var/lib/containers/storage"
time="2021-12-03T12:30:39Z" level=info msg="STORAGE RUN ROOT PATH: /var/run/containers/storage"
time="2021-12-03T12:30:39Z" level=info msg="Buildah contextDir: /wks/buildah-layers/context"
time="2021-12-03T12:30:39Z" level=info msg="Buildah tempdir: /wks/buildah-layers"
time="2021-12-03T12:30:39Z" level=info msg="Dockerfile path: /wks/Dockerfile-1"
time="2021-12-03T12:30:39Z" level=debug msg="[graphdriver] trying provided driver \"vfs\""
time="2021-12-03T12:30:39Z" level=debug msg="base for stage 0: \"registry.access.redhat.com/ubi8\""
time="2021-12-03T12:30:39Z" level=debug msg="FROM \"registry.access.redhat.com/ubi8\""
time="2021-12-03T12:30:39Z" level=debug msg="Pulling image registry.access.redhat.com/ubi8 (policy: missing)"
time="2021-12-03T12:30:39Z" level=debug msg="Looking up image \"registry.access.redhat.com/ubi8\" in local containers storage"
time="2021-12-03T12:30:39Z" level=debug msg="Trying \"registry.access.redhat.com/ubi8\" ..."
time="2021-12-03T12:30:39Z" level=debug msg="Trying \"registry.access.redhat.com/ubi8:latest\" ..."
time="2021-12-03T12:30:39Z" level=debug msg="Trying \"registry.access.redhat.com/ubi8:latest\" ..."
time="2021-12-03T12:30:39Z" level=debug msg="Loading registries configuration \"/etc/containers/registries.conf\""
time="2021-12-03T12:30:39Z" level=debug msg="Loading registries configuration \"/etc/containers/registries.conf.d/000-shortnames.conf\""
time="2021-12-03T12:30:39Z" level=debug msg="Attempting to pull candidate registry.access.redhat.com/ubi8:latest for registry.access.redhat.com/ubi8"
time="2021-12-03T12:30:39Z" level=debug msg="parsed reference into \"[vfs@/var/lib/containers/storage+/var/run/containers/storage]registry.access.redhat.com/ubi8:latest\""
time="2021-12-03T12:30:39Z" level=debug msg="Copying source image //registry.access.redhat.com/ubi8:latest to destination image [vfs@/var/lib/containers/storage+/var/run/containers/storage]registry.access.redhat.com/ubi8:latest"
time="2021-12-03T12:30:39Z" level=debug msg="Trying to access \"registry.access.redhat.com/ubi8:latest\""
time="2021-12-03T12:30:39Z" level=debug msg="No credentials for registry.access.redhat.com found"
time="2021-12-03T12:30:39Z" level=debug msg="Using registries.d directory /etc/containers/registries.d for sigstore configuration"
time="2021-12-03T12:30:39Z" level=debug msg=" No signature storage configuration found for registry.access.redhat.com/ubi8:latest, using built-in default file:///var/lib/containers/sigstore"
time="2021-12-03T12:30:39Z" level=debug msg="Looking for TLS certificates and private keys in /etc/docker/certs.d/registry.access.redhat.com"
time="2021-12-03T12:30:39Z" level=debug msg="GET https://registry.access.redhat.com/v2/"
time="2021-12-03T12:30:39Z" level=debug msg="Ping https://registry.access.redhat.com/v2/ status 200"
time="2021-12-03T12:30:39Z" level=debug msg="GET https://registry.access.redhat.com/v2/ubi8/manifests/latest"
time="2021-12-03T12:30:39Z" level=debug msg="Content-Type from manifest GET is \"application/vnd.docker.distribution.manifest.list.v2+json\""
time="2021-12-03T12:30:39Z" level=debug msg="Using blob info cache at /var/lib/containers/cache/blob-info-cache-v1.boltdb"
time="2021-12-03T12:30:39Z" level=debug msg="Source is a manifest list; copying (only) instance sha256:8ee9d7bbcfc19d383f9044316a5c5fbcbe2df6be3c97f6c7a5422527b29bdede for current system"
time="2021-12-03T12:30:39Z" level=debug msg="GET https://registry.access.redhat.com/v2/ubi8/manifests/sha256:8ee9d7bbcfc19d383f9044316a5c5fbcbe2df6be3c97f6c7a5422527b29bdede"
time="2021-12-03T12:30:40Z" level=debug msg="Content-Type from manifest GET is \"application/vnd.docker.distribution.manifest.v2+json\""
time="2021-12-03T12:30:40Z" level=debug msg="IsRunningImageAllowed for image docker:registry.access.redhat.com/ubi8:latest"
time="2021-12-03T12:30:40Z" level=debug msg=" Using default policy section"
time="2021-12-03T12:30:40Z" level=debug msg=" Requirement 0: allowed"
time="2021-12-03T12:30:40Z" level=debug msg="Overall: allowed"
time="2021-12-03T12:30:40Z" level=debug msg="Downloading /v2/ubi8/blobs/sha256:cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd"
time="2021-12-03T12:30:40Z" level=debug msg="GET https://registry.access.redhat.com/v2/ubi8/blobs/sha256:cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd"
time="2021-12-03T12:30:40Z" level=debug msg="Reading /var/lib/containers/sigstore/ubi8@sha256=8ee9d7bbcfc19d383f9044316a5c5fbcbe2df6be3c97f6c7a5422527b29bdede/signature-1"
time="2021-12-03T12:30:40Z" level=debug msg="Manifest has MIME type application/vnd.docker.distribution.manifest.v2+json, ordered candidate list [application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.v1+prettyjws, application/vnd.oci.image.manifest.v1+json, application/vnd.docker.distribution.manifest.v1+json]"
time="2021-12-03T12:30:40Z" level=debug msg="... will first try using the original manifest unmodified"
time="2021-12-03T12:30:40Z" level=debug msg="Failed to retrieve partial blob: blob type not supported for partial retrieval"
time="2021-12-03T12:30:40Z" level=debug msg="Failed to retrieve partial blob: blob type not supported for partial retrieval"
time="2021-12-03T12:30:40Z" level=debug msg="Downloading /v2/ubi8/blobs/sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f"
time="2021-12-03T12:30:40Z" level=debug msg="GET https://registry.access.redhat.com/v2/ubi8/blobs/sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f"
time="2021-12-03T12:30:40Z" level=debug msg="Downloading /v2/ubi8/blobs/sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38"
time="2021-12-03T12:30:40Z" level=debug msg="GET https://registry.access.redhat.com/v2/ubi8/blobs/sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38"
time="2021-12-03T12:30:40Z" level=debug msg="Detected compression format gzip"
time="2021-12-03T12:30:40Z" level=debug msg="Using original blob without modification"
time="2021-12-03T12:30:41Z" level=debug msg="Detected compression format gzip"
time="2021-12-03T12:30:41Z" level=debug msg="Using original blob without modification"
time="2021-12-03T12:31:50Z" level=debug msg="Start untar layer"
time="2021-12-03T12:31:54Z" level=debug msg="Untar time: 3.808868961s"
time="2021-12-03T12:31:56Z" level=debug msg="Start untar layer"
time="2021-12-03T12:31:56Z" level=debug msg="Untar time: 0.035626653s"
time="2021-12-03T12:31:56Z" level=debug msg="No compression detected"
time="2021-12-03T12:31:56Z" level=debug msg="Using original blob without modification"
time="2021-12-03T12:31:56Z" level=debug msg="setting image creation date to 2021-11-03 13:57:53.878769 +0000 UTC"
time="2021-12-03T12:31:56Z" level=debug msg="created new image ID \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\""
time="2021-12-03T12:31:56Z" level=debug msg="saved image metadata \"{\\\"signatures-sizes\\\":{\\\"sha256:8ee9d7bbcfc19d383f9044316a5c5fbcbe2df6be3c97f6c7a5422527b29bdede\\\":[]}}\""
time="2021-12-03T12:31:56Z" level=debug msg="set names of image \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" to [registry.access.redhat.com/ubi8:latest]"
time="2021-12-03T12:31:56Z" level=debug msg="Pulled candidate registry.access.redhat.com/ubi8:latest successfully"
time="2021-12-03T12:31:56Z" level=debug msg="Looking up image \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" in local containers storage"
time="2021-12-03T12:31:56Z" level=debug msg="Trying \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" ..."
time="2021-12-03T12:31:56Z" level=debug msg="parsed reference into \"[vfs@/var/lib/containers/storage+/var/run/containers/storage]@cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\""
time="2021-12-03T12:31:56Z" level=debug msg="Found image \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" as \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" in local containers storage"
time="2021-12-03T12:31:56Z" level=debug msg="Found image \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" as \"cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\" in local containers storage ([vfs@/var/lib/containers/storage+/var/run/containers/storage]@cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd)"
time="2021-12-03T12:31:57Z" level=debug msg="exporting opaque data as blob \"sha256:cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\""
time="2021-12-03T12:31:57Z" level=debug msg="[graphdriver] trying provided driver \"vfs\""
time="2021-12-03T12:31:57Z" level=debug msg="Container ID: 5f4e95d381001629c3f974047d2dd201f760111b10e72fab91b4720e3d27f0b7"
time="2021-12-03T12:31:57Z" level=debug msg="Parsed Step: {Env:[PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin container=oci] Command:run Args:[echo \"Good\" > good.txt] Flags:[] Attrs:map[] Message:RUN echo \"Good\" > good.txt Original:RUN echo \"Good\" > good.txt}"
time="2021-12-03T12:31:57Z" level=debug msg="RUN imagebuilder.Run{Shell:true, Args:[]string{\"echo \\\"Good\\\" > good.txt\"}, Mounts:[]string(nil)}, docker.Config{Hostname:\"b20a3e8238f9\", Domainname:\"\", User:\"\", Memory:0, MemorySwap:0, MemoryReservation:0, KernelMemory:0, CPUShares:0, CPUSet:\"\", PortSpecs:[]string(nil), ExposedPorts:map[docker.Port]struct {}{}, PublishService:\"\", StopSignal:\"\", StopTimeout:0, Env:[]string{\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\", \"container=oci\"}, Cmd:[]string{\"/bin/bash\"}, Shell:[]string{}, Healthcheck:(*docker.HealthConfig)(nil), DNS:[]string(nil), Image:\"\", Volumes:map[string]struct {}{}, VolumeDriver:\"\", WorkingDir:\"\", MacAddress:\"\", Entrypoint:[]string{}, SecurityOpts:[]string(nil), OnBuild:[]string{}, Mounts:[]docker.Mount(nil), Labels:map[string]string{\"architecture\":\"x86_64\", \"build-date\":\"2021-11-03T13:57:13.897992\", \"com.redhat.build-host\":\"cpt-1006.osbs.prod.upshift.rdu2.redhat.com\", \"com.redhat.component\":\"ubi8-container\", \"com.redhat.license_terms\":\"https://www.redhat.com/en/about/red-hat-end-user-license-agreements#UBI\", \"description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\", \"distribution-scope\":\"public\", \"io.k8s.description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\", \"io.k8s.display-name\":\"Red Hat Universal Base Image 8\", \"io.openshift.expose-services\":\"\", \"io.openshift.tags\":\"base rhel8\", \"maintainer\":\"Red Hat, Inc.\", \"name\":\"ubi8\", \"release\":\"200\", \"summary\":\"Provides the latest release of Red Hat Universal Base Image 8.\", \"url\":\"https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/images/8.5-200\", \"vcs-ref\":\"3aadd00326f3dd6cfe65ee31017ab98915fddb56\", \"vcs-type\":\"git\", \"vendor\":\"Red Hat, Inc.\", \"version\":\"8.5\"}, AttachStdin:false, AttachStdout:false, AttachStderr:false, ArgsEscaped:false, Tty:false, OpenStdin:false, StdinOnce:false, NetworkDisabled:false, VolumesFrom:\"\"}"
time="2021-12-03T12:31:57Z" level=debug msg="using \"/tmp/buildah777006517\" to hold bundle data"
time="2021-12-03T12:31:57Z" level=debug msg="Resources: &define.CommonBuildOptions{AddHost:[]string(nil), CgroupParent:\"\", CPUPeriod:0x0, CPUQuota:0, CPUShares:0x0, CPUSetCPUs:\"\", CPUSetMems:\"\", HTTPProxy:false, Memory:0, DNSSearch:[]string(nil), DNSServers:[]string(nil), DNSOptions:[]string(nil), MemorySwap:0, LabelOpts:[]string(nil), OmitTimestamp:false, SeccompProfilePath:\"\", ApparmorProfile:\"\", ShmSize:\"\", Ulimit:[]string(nil), Volumes:[]string(nil), Secrets:[]string(nil), SSHSources:[]string(nil)}"
time="2021-12-03T12:31:57Z" level=debug msg="[graphdriver] trying provided driver \"vfs\""
time="2021-12-03T12:31:57Z" level=debug msg="/etc/system-fips does not exist on host, not mounting FIPS mode subscription"
time="2021-12-03T12:31:57Z" level=debug msg="config = {\"ociVersion\":\"1.0.2-dev\",\"process\":{\"user\":{\"uid\":0,\"gid\":0},\"args\":[\"/bin/sh\",\"-c\",\"echo \\\"Good\\\" \\u003e good.txt\"],\"env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"container=oci\",\"HOSTNAME=b20a3e8238f9\",\"HOME=/root\"],\"cwd\":\"/\",\"capabilities\":{\"bounding\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"effective\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"inheritable\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"permitted\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"ambient\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"]},\"rlimits\":[{\"type\":\"RLIMIT_NOFILE\",\"hard\":1024,\"soft\":1024},{\"type\":\"RLIMIT_NPROC\",\"hard\":4194304,\"soft\":4194304}]},\"root\":{\"path\":\"/var/lib/containers/storage/vfs/dir/280445d32652e5c0cccde2d1db992137e96bca1e1d4841b417cbc46a739d92a3\"},\"hostname\":\"b20a3e8238f9\",\"mounts\":[{\"destination\":\"/sys\",\"type\":\"sysfs\",\"source\":\"sysfs\",\"options\":[\"nosuid\",\"noexec\",\"nodev\",\"ro\"]},{\"destination\":\"/proc\",\"type\":\"proc\",\"source\":\"proc\",\"options\":[\"nosuid\",\"noexec\",\"nodev\"]},{\"destination\":\"/dev\",\"type\":\"tmpfs\",\"source\":\"tmpfs\",\"options\":[\"nosuid\",\"strictatime\",\"mode=755\",\"size=65536k\"]},{\"destination\":\"/etc/resolv.conf\",\"type\":\"bind\",\"source\":\"/tmp/buildah777006517/resolv.conf\",\"options\":[\"rbind\",\"nobuildahbind\"]},{\"destination\":\"/run/.containerenv\",\"type\":\"bind\",\"source\":\"/tmp/buildah777006517/run/.containerenv\",\"options\":[\"rbind\",\"nobuildahbind\"]},{\"destination\":\"/dev/pts\",\"type\":\"devpts\",\"source\":\"devpts\",\"options\":[\"nosuid\",\"noexec\",\"newinstance\",\"ptmxmode=0666\",\"mode=0620\",\"gid=5\"]},{\"destination\":\"/dev/shm\",\"type\":\"tmpfs\",\"source\":\"shm\",\"options\":[\"nosuid\",\"noexec\",\"nodev\",\"mode=1777\"]},{\"destination\":\"/dev/mqueue\",\"type\":\"mqueue\",\"source\":\"mqueue\",\"options\":[\"nosuid\",\"noexec\",\"nodev\"]},{\"destination\":\"/etc/hosts\",\"type\":\"bind\",\"source\":\"/tmp/buildah777006517/hosts\",\"options\":[\"rbind\",\"nobuildahbind\"]},{\"destination\":\"/sys/fs/cgroup\",\"type\":\"cgroup\",\"source\":\"cgroup\",\"options\":[\"nobuildahbind\",\"nosuid\",\"noexec\",\"nodev\",\"relatime\",\"ro\"]}],\"linux\":{\"resources\":{\"devices\":[{\"allow\":false,\"access\":\"rwm\"}]},\"namespaces\":[{\"type\":\"pid\"},{\"type\":\"ipc\"},{\"type\":\"uts\"},{\"type\":\"mount\"}],\"maskedPaths\":[\"/proc/acpi\",\"/proc/kcore\",\"/proc/keys\",\"/proc/latency_stats\",\"/proc/timer_list\",\"/proc/timer_stats\",\"/proc/sched_debug\",\"/proc/scsi\",\"/sys/firmware\",\"/sys/fs/selinux\",\"/sys/dev\"],\"readonlyPaths\":[\"/proc/asound\",\"/proc/bus\",\"/proc/fs\",\"/proc/irq\",\"/proc/sys\",\"/proc/sysrq-trigger\"]}}"
time="2021-12-03T12:31:57Z" level=debug msg="Running &exec.Cmd{Path:\"/proc/self/exe\", Args:[]string{\"buildah-chroot-runtime\"}, Env:[]string{\"LOGLEVEL=5\"}, Dir:\"/\", Stdin:(*os.File)(0xc00029a4e0), Stdout:(*bytes.Buffer)(0xc000349a10), Stderr:(*bytes.Buffer)(0xc000349a10), ExtraFiles:[]*os.File(nil), SysProcAttr:(*syscall.SysProcAttr)(nil), Process:(*os.Process)(nil), ProcessState:(*os.ProcessState)(nil), ctx:context.Context(nil), lookPathErr:error(nil), finished:false, childFiles:[]*os.File(nil), closeAfterStart:[]io.Closer(nil), closeAfterWait:[]io.Closer(nil), goroutine:[]func() error(nil), errch:(chan error)(nil), waitDone:(chan struct {})(nil)} in &unshare.Cmd{Cmd:(*exec.Cmd)(0xc000c6a000), UnshareFlags:0, UseNewuidmap:false, UidMappings:[]specs.LinuxIDMapping(nil), UseNewgidmap:false, GidMappings:[]specs.LinuxIDMapping(nil), GidMappingsEnableSetgroups:false, Setsid:false, Setpgrp:false, Ctty:(*os.File)(nil), OOMScoreAdj:(*int)(nil), Hook:(func(int) error)(nil)}"
time="2021-12-03T12:31:57Z" level=debug msg="Parsed Step: {Env:[PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin container=oci] Command:run Args:[echo \"Bye\" > bye.txt] Flags:[] Attrs:map[] Message:RUN echo \"Bye\" > bye.txt Original:RUN echo \"Bye\" > bye.txt}"
time="2021-12-03T12:31:57Z" level=debug msg="RUN imagebuilder.Run{Shell:true, Args:[]string{\"echo \\\"Bye\\\" > bye.txt\"}, Mounts:[]string(nil)}, docker.Config{Hostname:\"b20a3e8238f9\", Domainname:\"\", User:\"\", Memory:0, MemorySwap:0, MemoryReservation:0, KernelMemory:0, CPUShares:0, CPUSet:\"\", PortSpecs:[]string(nil), ExposedPorts:map[docker.Port]struct {}{}, PublishService:\"\", StopSignal:\"\", StopTimeout:0, Env:[]string{\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\", \"container=oci\"}, Cmd:[]string{\"/bin/bash\"}, Shell:[]string{}, Healthcheck:(*docker.HealthConfig)(nil), DNS:[]string(nil), Image:\"\", Volumes:map[string]struct {}{}, VolumeDriver:\"\", WorkingDir:\"\", MacAddress:\"\", Entrypoint:[]string{}, SecurityOpts:[]string(nil), OnBuild:[]string{}, Mounts:[]docker.Mount(nil), Labels:map[string]string{\"architecture\":\"x86_64\", \"build-date\":\"2021-11-03T13:57:13.897992\", \"com.redhat.build-host\":\"cpt-1006.osbs.prod.upshift.rdu2.redhat.com\", \"com.redhat.component\":\"ubi8-container\", \"com.redhat.license_terms\":\"https://www.redhat.com/en/about/red-hat-end-user-license-agreements#UBI\", \"description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\", \"distribution-scope\":\"public\", \"io.k8s.description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\", \"io.k8s.display-name\":\"Red Hat Universal Base Image 8\", \"io.openshift.expose-services\":\"\", \"io.openshift.tags\":\"base rhel8\", \"maintainer\":\"Red Hat, Inc.\", \"name\":\"ubi8\", \"release\":\"200\", \"summary\":\"Provides the latest release of Red Hat Universal Base Image 8.\", \"url\":\"https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/images/8.5-200\", \"vcs-ref\":\"3aadd00326f3dd6cfe65ee31017ab98915fddb56\", \"vcs-type\":\"git\", \"vendor\":\"Red Hat, Inc.\", \"version\":\"8.5\"}, AttachStdin:false, AttachStdout:false, AttachStderr:false, ArgsEscaped:false, Tty:false, OpenStdin:false, StdinOnce:false, NetworkDisabled:false, VolumesFrom:\"\"}"
time="2021-12-03T12:31:57Z" level=debug msg="using \"/tmp/buildah291865597\" to hold bundle data"
time="2021-12-03T12:31:57Z" level=debug msg="Resources: &define.CommonBuildOptions{AddHost:[]string(nil), CgroupParent:\"\", CPUPeriod:0x0, CPUQuota:0, CPUShares:0x0, CPUSetCPUs:\"\", CPUSetMems:\"\", HTTPProxy:false, Memory:0, DNSSearch:[]string(nil), DNSServers:[]string(nil), DNSOptions:[]string(nil), MemorySwap:0, LabelOpts:[]string(nil), OmitTimestamp:false, SeccompProfilePath:\"\", ApparmorProfile:\"\", ShmSize:\"\", Ulimit:[]string(nil), Volumes:[]string(nil), Secrets:[]string(nil), SSHSources:[]string(nil)}"
time="2021-12-03T12:31:57Z" level=debug msg="[graphdriver] trying provided driver \"vfs\""
time="2021-12-03T12:31:57Z" level=debug msg="/etc/system-fips does not exist on host, not mounting FIPS mode subscription"
time="2021-12-03T12:31:57Z" level=debug msg="config = {\"ociVersion\":\"1.0.2-dev\",\"process\":{\"user\":{\"uid\":0,\"gid\":0},\"args\":[\"/bin/sh\",\"-c\",\"echo \\\"Bye\\\" \\u003e bye.txt\"],\"env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"container=oci\",\"HOSTNAME=b20a3e8238f9\",\"HOME=/root\"],\"cwd\":\"/\",\"capabilities\":{\"bounding\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"effective\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"inheritable\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"permitted\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"],\"ambient\":[\"CAP_AUDIT_WRITE\",\"CAP_CHOWN\",\"CAP_DAC_OVERRIDE\",\"CAP_FOWNER\",\"CAP_FSETID\",\"CAP_KILL\",\"CAP_MKNOD\",\"CAP_NET_BIND_SERVICE\",\"CAP_NET_RAW\",\"CAP_SETFCAP\",\"CAP_SETGID\",\"CAP_SETPCAP\",\"CAP_SETUID\",\"CAP_SYS_CHROOT\"]},\"rlimits\":[{\"type\":\"RLIMIT_NOFILE\",\"hard\":1024,\"soft\":1024},{\"type\":\"RLIMIT_NPROC\",\"hard\":4194304,\"soft\":4194304}]},\"root\":{\"path\":\"/var/lib/containers/storage/vfs/dir/280445d32652e5c0cccde2d1db992137e96bca1e1d4841b417cbc46a739d92a3\"},\"hostname\":\"b20a3e8238f9\",\"mounts\":[{\"destination\":\"/sys\",\"type\":\"sysfs\",\"source\":\"sysfs\",\"options\":[\"nosuid\",\"noexec\",\"nodev\",\"ro\"]},{\"destination\":\"/proc\",\"type\":\"proc\",\"source\":\"proc\",\"options\":[\"nosuid\",\"noexec\",\"nodev\"]},{\"destination\":\"/dev\",\"type\":\"tmpfs\",\"source\":\"tmpfs\",\"options\":[\"nosuid\",\"strictatime\",\"mode=755\",\"size=65536k\"]},{\"destination\":\"/etc/resolv.conf\",\"type\":\"bind\",\"source\":\"/tmp/buildah291865597/resolv.conf\",\"options\":[\"rbind\",\"nobuildahbind\"]},{\"destination\":\"/run/.containerenv\",\"type\":\"bind\",\"source\":\"/tmp/buildah291865597/run/.containerenv\",\"options\":[\"rbind\",\"nobuildahbind\"]},{\"destination\":\"/dev/pts\",\"type\":\"devpts\",\"source\":\"devpts\",\"options\":[\"nosuid\",\"noexec\",\"newinstance\",\"ptmxmode=0666\",\"mode=0620\",\"gid=5\"]},{\"destination\":\"/dev/shm\",\"type\":\"tmpfs\",\"source\":\"shm\",\"options\":[\"nosuid\",\"noexec\",\"nodev\",\"mode=1777\"]},{\"destination\":\"/dev/mqueue\",\"type\":\"mqueue\",\"source\":\"mqueue\",\"options\":[\"nosuid\",\"noexec\",\"nodev\"]},{\"destination\":\"/etc/hosts\",\"type\":\"bind\",\"source\":\"/tmp/buildah291865597/hosts\",\"options\":[\"rbind\",\"nobuildahbind\"]},{\"destination\":\"/sys/fs/cgroup\",\"type\":\"cgroup\",\"source\":\"cgroup\",\"options\":[\"nobuildahbind\",\"nosuid\",\"noexec\",\"nodev\",\"relatime\",\"ro\"]}],\"linux\":{\"resources\":{\"devices\":[{\"allow\":false,\"access\":\"rwm\"}]},\"namespaces\":[{\"type\":\"pid\"},{\"type\":\"ipc\"},{\"type\":\"uts\"},{\"type\":\"mount\"}],\"maskedPaths\":[\"/proc/acpi\",\"/proc/kcore\",\"/proc/keys\",\"/proc/latency_stats\",\"/proc/timer_list\",\"/proc/timer_stats\",\"/proc/sched_debug\",\"/proc/scsi\",\"/sys/firmware\",\"/sys/fs/selinux\",\"/sys/dev\"],\"readonlyPaths\":[\"/proc/asound\",\"/proc/bus\",\"/proc/fs\",\"/proc/irq\",\"/proc/sys\",\"/proc/sysrq-trigger\"]}}"
time="2021-12-03T12:31:57Z" level=debug msg="Running &exec.Cmd{Path:\"/proc/self/exe\", Args:[]string{\"buildah-chroot-runtime\"}, Env:[]string{\"LOGLEVEL=5\"}, Dir:\"/\", Stdin:(*os.File)(0xc000011070), Stdout:(*bytes.Buffer)(0xc000349a10), Stderr:(*bytes.Buffer)(0xc000349a10), ExtraFiles:[]*os.File(nil), SysProcAttr:(*syscall.SysProcAttr)(nil), Process:(*os.Process)(nil), ProcessState:(*os.ProcessState)(nil), ctx:context.Context(nil), lookPathErr:error(nil), finished:false, childFiles:[]*os.File(nil), closeAfterStart:[]io.Closer(nil), closeAfterWait:[]io.Closer(nil), goroutine:[]func() error(nil), errch:(chan error)(nil), waitDone:(chan struct {})(nil)} in &unshare.Cmd{Cmd:(*exec.Cmd)(0xc00084e000), UnshareFlags:0, UseNewuidmap:false, UidMappings:[]specs.LinuxIDMapping(nil), UseNewgidmap:false, GidMappings:[]specs.LinuxIDMapping(nil), GidMappingsEnableSetgroups:false, Setsid:false, Setpgrp:false, Ctty:(*os.File)(nil), OOMScoreAdj:(*int)(nil), Hook:(func(int) error)(nil)}"
time="2021-12-03T12:31:58Z" level=debug msg="COMMIT buildpack-buildah:1638534639101529533-1"
time="2021-12-03T12:31:58Z" level=debug msg="Looking up image \"buildpack-buildah:1638534639101529533-1\" in local containers storage"
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"localhost/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"registry.fedoraproject.org/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"registry.access.redhat.com/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"docker.io/library/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"quay.io/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="Trying \"docker.io/library/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:31:58Z" level=debug msg="parsed reference into \"[vfs@/var/lib/containers/storage+/var/run/containers/storage]localhost/buildpack-buildah:1638534639101529533-1\""
time="2021-12-03T12:31:58Z" level=debug msg="COMMIT \"containers-storage:[vfs@/var/lib/containers/storage+/var/run/containers/storage]localhost/buildpack-buildah:1638534639101529533-1\""
time="2021-12-03T12:31:58Z" level=debug msg="committing image with reference \"containers-storage:[vfs@/var/lib/containers/storage+/var/run/containers/storage]localhost/buildpack-buildah:1638534639101529533-1\" is allowed by policy"
time="2021-12-03T12:31:58Z" level=debug msg="layer list: [\"0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\" \"0c51fae87c95e09f4dfccee417713913004c97821d72473d07faeba9c4132761\" \"280445d32652e5c0cccde2d1db992137e96bca1e1d4841b417cbc46a739d92a3\"]"
time="2021-12-03T12:31:58Z" level=debug msg="using \"/tmp/buildah174259680\" to hold temporary data"
time="2021-12-03T12:31:59Z" level=debug msg="layer \"280445d32652e5c0cccde2d1db992137e96bca1e1d4841b417cbc46a739d92a3\" size is 4096 bytes, uncompressed digest sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2, possibly-compressed digest sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2"
time="2021-12-03T12:31:59Z" level=debug msg="OCIv1 config = {\"created\":\"2021-12-03T12:31:58.087489424Z\",\"architecture\":\"amd64\",\"os\":\"linux\",\"config\":{\"Env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"container=oci\"],\"Cmd\":[\"/bin/bash\"],\"Labels\":{\"architecture\":\"x86_64\",\"build-date\":\"2021-11-03T13:57:13.897992\",\"com.redhat.build-host\":\"cpt-1006.osbs.prod.upshift.rdu2.redhat.com\",\"com.redhat.component\":\"ubi8-container\",\"com.redhat.license_terms\":\"https://www.redhat.com/en/about/red-hat-end-user-license-agreements#UBI\",\"description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\",\"distribution-scope\":\"public\",\"io.buildah.version\":\"1.23.1\",\"io.k8s.description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\",\"io.k8s.display-name\":\"Red Hat Universal Base Image 8\",\"io.openshift.expose-services\":\"\",\"io.openshift.tags\":\"base rhel8\",\"maintainer\":\"Red Hat, Inc.\",\"name\":\"ubi8\",\"release\":\"200\",\"summary\":\"Provides the latest release of Red Hat Universal Base Image 8.\",\"url\":\"https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/images/8.5-200\",\"vcs-ref\":\"3aadd00326f3dd6cfe65ee31017ab98915fddb56\",\"vcs-type\":\"git\",\"vendor\":\"Red Hat, Inc.\",\"version\":\"8.5\"}},\"rootfs\":{\"type\":\"layers\",\"diff_ids\":[\"sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\",\"sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc\",\"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\"]},\"history\":[{\"created\":\"2021-11-03T13:57:39.79709821Z\",\"comment\":\"Imported from -\"},{\"created\":\"2021-11-03T13:57:53.878769Z\"},{\"created\":\"2021-12-03T12:31:57.828475942Z\",\"created_by\":\"/bin/sh -c echo \\\"Good\\\" \\u003e good.txt\",\"empty_layer\":true},{\"created\":\"2021-12-03T12:31:59.001561709Z\",\"created_by\":\"/bin/sh -c echo \\\"Bye\\\" \\u003e bye.txt\",\"comment\":\"FROM registry.access.redhat.com/ubi8:latest\"}]}"
time="2021-12-03T12:31:59Z" level=debug msg="OCIv1 manifest = {\"schemaVersion\":2,\"config\":{\"mediaType\":\"application/vnd.oci.image.config.v1+json\",\"digest\":\"sha256:082ce1611057343c54b0c8ac091acf682759cc3123ad20b2e07943c762022838\",\"size\":2385},\"layers\":[{\"mediaType\":\"application/vnd.oci.image.layer.v1.tar\",\"digest\":\"sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\",\"size\":234711040},{\"mediaType\":\"application/vnd.oci.image.layer.v1.tar\",\"digest\":\"sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc\",\"size\":20480},{\"mediaType\":\"application/vnd.oci.image.layer.v1.tar\",\"digest\":\"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\",\"size\":4096}],\"annotations\":{\"org.opencontainers.image.base.digest\":\"sha256:8ee9d7bbcfc19d383f9044316a5c5fbcbe2df6be3c97f6c7a5422527b29bdede\",\"org.opencontainers.image.base.name\":\"registry.access.redhat.com/ubi8:latest\"}}"
time="2021-12-03T12:31:59Z" level=debug msg="Docker v2s2 config = {\"created\":\"2021-12-03T12:31:58.087489424Z\",\"container\":\"5f4e95d381001629c3f974047d2dd201f760111b10e72fab91b4720e3d27f0b7\",\"container_config\":{\"Hostname\":\"b20a3e8238f9\",\"Domainname\":\"\",\"User\":\"\",\"AttachStdin\":false,\"AttachStdout\":false,\"AttachStderr\":false,\"Tty\":false,\"OpenStdin\":false,\"StdinOnce\":false,\"Env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"container=oci\"],\"Cmd\":[\"/bin/bash\"],\"ArgsEscaped\":true,\"Image\":\"6c0c06bb29436721ce6844efc80334a2dd87c939a4fdaf5de4f539bf0e910a3a\",\"Volumes\":{},\"WorkingDir\":\"\",\"Entrypoint\":[],\"OnBuild\":[],\"Labels\":{\"architecture\":\"x86_64\",\"build-date\":\"2021-11-03T13:57:13.897992\",\"com.redhat.build-host\":\"cpt-1006.osbs.prod.upshift.rdu2.redhat.com\",\"com.redhat.component\":\"ubi8-container\",\"com.redhat.license_terms\":\"https://www.redhat.com/en/about/red-hat-end-user-license-agreements#UBI\",\"description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\",\"distribution-scope\":\"public\",\"io.buildah.version\":\"1.23.1\",\"io.k8s.description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\",\"io.k8s.display-name\":\"Red Hat Universal Base Image 8\",\"io.openshift.expose-services\":\"\",\"io.openshift.tags\":\"base rhel8\",\"maintainer\":\"Red Hat, Inc.\",\"name\":\"ubi8\",\"release\":\"200\",\"summary\":\"Provides the latest release of Red Hat Universal Base Image 8.\",\"url\":\"https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/images/8.5-200\",\"vcs-ref\":\"3aadd00326f3dd6cfe65ee31017ab98915fddb56\",\"vcs-type\":\"git\",\"vendor\":\"Red Hat, Inc.\",\"version\":\"8.5\"}},\"config\":{\"Hostname\":\"b20a3e8238f9\",\"Domainname\":\"\",\"User\":\"\",\"AttachStdin\":false,\"AttachStdout\":false,\"AttachStderr\":false,\"Tty\":false,\"OpenStdin\":false,\"StdinOnce\":false,\"Env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"container=oci\"],\"Cmd\":[\"/bin/bash\"],\"ArgsEscaped\":true,\"Image\":\"6c0c06bb29436721ce6844efc80334a2dd87c939a4fdaf5de4f539bf0e910a3a\",\"Volumes\":{},\"WorkingDir\":\"\",\"Entrypoint\":[],\"OnBuild\":[],\"Labels\":{\"architecture\":\"x86_64\",\"build-date\":\"2021-11-03T13:57:13.897992\",\"com.redhat.build-host\":\"cpt-1006.osbs.prod.upshift.rdu2.redhat.com\",\"com.redhat.component\":\"ubi8-container\",\"com.redhat.license_terms\":\"https://www.redhat.com/en/about/red-hat-end-user-license-agreements#UBI\",\"description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\",\"distribution-scope\":\"public\",\"io.buildah.version\":\"1.23.1\",\"io.k8s.description\":\"The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.\",\"io.k8s.display-name\":\"Red Hat Universal Base Image 8\",\"io.openshift.expose-services\":\"\",\"io.openshift.tags\":\"base rhel8\",\"maintainer\":\"Red Hat, Inc.\",\"name\":\"ubi8\",\"release\":\"200\",\"summary\":\"Provides the latest release of Red Hat Universal Base Image 8.\",\"url\":\"https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/images/8.5-200\",\"vcs-ref\":\"3aadd00326f3dd6cfe65ee31017ab98915fddb56\",\"vcs-type\":\"git\",\"vendor\":\"Red Hat, Inc.\",\"version\":\"8.5\"}},\"architecture\":\"amd64\",\"os\":\"linux\",\"parent\":\"sha256:cc0656847854310306093b3dc1a7d9e7fc06399da46853e0c921cd5ec1906bfd\",\"rootfs\":{\"type\":\"layers\",\"diff_ids\":[\"sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\",\"sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc\",\"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\"]},\"history\":[{\"created\":\"2021-11-03T13:57:39.79709821Z\",\"comment\":\"Imported from -\"},{\"created\":\"2021-11-03T13:57:53.878769Z\"},{\"created\":\"2021-12-03T12:31:57.828475942Z\",\"created_by\":\"/bin/sh -c echo \\\"Good\\\" \\u003e good.txt\",\"empty_layer\":true},{\"created\":\"2021-12-03T12:31:59.001561709Z\",\"created_by\":\"/bin/sh -c echo \\\"Bye\\\" \\u003e bye.txt\",\"comment\":\"FROM registry.access.redhat.com/ubi8:latest\"}]}"
time="2021-12-03T12:31:59Z" level=debug msg="Docker v2s2 manifest = {\"schemaVersion\":2,\"mediaType\":\"application/vnd.docker.distribution.manifest.v2+json\",\"config\":{\"mediaType\":\"application/vnd.docker.container.image.v1+json\",\"size\":4827,\"digest\":\"sha256:fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\"},\"layers\":[{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar\",\"size\":234711040,\"digest\":\"sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\"},{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar\",\"size\":20480,\"digest\":\"sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc\"},{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar\",\"size\":4096,\"digest\":\"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\"}]}"
time="2021-12-03T12:31:59Z" level=debug msg="Using blob info cache at /var/lib/containers/cache/blob-info-cache-v1.boltdb"
time="2021-12-03T12:31:59Z" level=debug msg="IsRunningImageAllowed for image containers-storage:"
time="2021-12-03T12:31:59Z" level=debug msg=" Using transport \"containers-storage\" policy section "
time="2021-12-03T12:31:59Z" level=debug msg=" Requirement 0: allowed"
time="2021-12-03T12:31:59Z" level=debug msg="Overall: allowed"
time="2021-12-03T12:31:59Z" level=debug msg="start reading config"
time="2021-12-03T12:31:59Z" level=debug msg="finished reading config"
time="2021-12-03T12:31:59Z" level=debug msg="Manifest has MIME type application/vnd.docker.distribution.manifest.v2+json, ordered candidate list [application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.v1+prettyjws, application/vnd.oci.image.manifest.v1+json, application/vnd.docker.distribution.manifest.v1+json]"
time="2021-12-03T12:31:59Z" level=debug msg="... will first try using the original manifest unmodified"
time="2021-12-03T12:31:59Z" level=debug msg="Skipping blob sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc (already present):"
time="2021-12-03T12:31:59Z" level=debug msg="Skipping blob sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc (already present):"
time="2021-12-03T12:31:59Z" level=debug msg="reading layer \"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\""
time="2021-12-03T12:31:59Z" level=debug msg="No compression detected"
time="2021-12-03T12:31:59Z" level=debug msg="Using original blob without modification"
time="2021-12-03T12:32:00Z" level=debug msg="Start untar layer"
time="2021-12-03T12:32:00Z" level=debug msg="Untar time: 0.036561747s"
time="2021-12-03T12:32:00Z" level=debug msg="finished reading layer \"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\""
time="2021-12-03T12:32:00Z" level=debug msg="No compression detected"
time="2021-12-03T12:32:00Z" level=debug msg="Using original blob without modification"
time="2021-12-03T12:32:00Z" level=debug msg="setting image creation date to 2021-12-03 12:31:58.087489424 +0000 UTC"
time="2021-12-03T12:32:00Z" level=debug msg="created new image ID \"fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\""
time="2021-12-03T12:32:00Z" level=debug msg="saved image metadata \"{\\\"signatures-sizes\\\":{\\\"sha256:cce90cb737d260d5006d46068ab9b3bb1af9bfb000b8c32aab83b7801d86e120\\\":[]}}\""
time="2021-12-03T12:32:00Z" level=debug msg="set names of image \"fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\" to [localhost/buildpack-buildah:1638534639101529533-1]"
time="2021-12-03T12:32:00Z" level=debug msg="Looking up image \"buildpack-buildah:1638534639101529533-1\" in local containers storage"
time="2021-12-03T12:32:00Z" level=debug msg="Trying \"buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:32:00Z" level=debug msg="Trying \"localhost/buildpack-buildah:1638534639101529533-1\" ..."
time="2021-12-03T12:32:00Z" level=debug msg="parsed reference into \"[vfs@/var/lib/containers/storage+/var/run/containers/storage]@fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\""
time="2021-12-03T12:32:00Z" level=debug msg="Found image \"buildpack-buildah:1638534639101529533-1\" as \"localhost/buildpack-buildah:1638534639101529533-1\" in local containers storage"
time="2021-12-03T12:32:00Z" level=debug msg="Found image \"buildpack-buildah:1638534639101529533-1\" as \"localhost/buildpack-buildah:1638534639101529533-1\" in local containers storage ([vfs@/var/lib/containers/storage+/var/run/containers/storage]@fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814)"
time="2021-12-03T12:32:00Z" level=debug msg="parsed reference into \"[vfs@/var/lib/containers/storage+/var/run/containers/storage]localhost/buildpack-buildah:1638534639101529533-1\""
time="2021-12-03T12:32:00Z" level=debug msg="printing final image id \"fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\""
time="2021-12-03T12:32:00Z" level=info msg="Image id: fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814"
time="2021-12-03T12:32:00Z" level=info msg="Image digest: localhost/buildpack-buildah:1638534639101529533-1@sha256:cce90cb737d260d5006d46068ab9b3bb1af9bfb000b8c32aab83b7801d86e120"
time="2021-12-03T12:32:00Z" level=info msg="Image manifest: {\n    \"schemaVersion\": 2,\n    \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n    \"config\": {\n        \"mediaType\": \"application/vnd.docker.container.image.v1+json\",\n        \"size\": 4827,\n        \"digest\": \"sha256:fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\"\n    },\n    \"layers\": [\n        {\n            \"mediaType\": \"application/vnd.docker.image.rootfs.diff.tar\",\n            \"size\": 234711040,\n            \"digest\": \"sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\"\n        },\n        {\n            \"mediaType\": \"application/vnd.docker.image.rootfs.diff.tar\",\n            \"size\": 20480,\n            \"digest\": \"sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc\"\n        },\n        {\n            \"mediaType\": \"application/vnd.docker.image.rootfs.diff.tar\",\n            \"size\": 4096,\n            \"digest\": \"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\"\n        }\n    ]\n}\n"
time="2021-12-03T12:32:00Z" level=info msg="Image repository id: fce63db3af3"
time="2021-12-03T12:32:00Z" level=info msg="Image built successfully :-)"
time="2021-12-03T12:32:00Z" level=debug msg="Using blob info cache at /var/lib/containers/cache/blob-info-cache-v1.boltdb"
time="2021-12-03T12:32:00Z" level=debug msg="IsRunningImageAllowed for image containers-storage:[vfs@/var/lib/containers/storage]@fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814"
time="2021-12-03T12:32:00Z" level=debug msg=" Using default policy section"
time="2021-12-03T12:32:00Z" level=debug msg=" Requirement 0: allowed"
time="2021-12-03T12:32:00Z" level=debug msg="Overall: allowed"
time="2021-12-03T12:32:00Z" level=debug msg="Manifest has MIME type application/vnd.docker.distribution.manifest.v2+json, ordered candidate list [application/vnd.oci.image.manifest.v1+json]"
time="2021-12-03T12:32:00Z" level=debug msg="exporting filesystem layer \"0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\" without compression for blob \"sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc\""
time="2021-12-03T12:32:05Z" level=debug msg="No compression detected"
time="2021-12-03T12:32:05Z" level=debug msg="Compressing blob on the fly"
time="2021-12-03T12:32:08Z" level=debug msg="exporting filesystem layer \"0c51fae87c95e09f4dfccee417713913004c97821d72473d07faeba9c4132761\" without compression for blob \"sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc\""
time="2021-12-03T12:32:08Z" level=debug msg="No compression detected"
time="2021-12-03T12:32:08Z" level=debug msg="Compressing blob on the fly"
time="2021-12-03T12:32:08Z" level=debug msg="exporting filesystem layer \"65a8e3d2b0ca135c9efe3174172cc1310a74a02169c1aca302bff13260846771\" without compression for blob \"sha256:fda91dc52ef08977ec163d779cd6fc3f1c1a0400ddd50e849f07f5cbd0b646b2\""
time="2021-12-03T12:32:08Z" level=debug msg="No compression detected"
time="2021-12-03T12:32:08Z" level=debug msg="Compressing blob on the fly"
time="2021-12-03T12:32:08Z" level=debug msg="exporting opaque data as blob \"sha256:fce63db3af303d001a085642cac2622d06f96fbf24caf932350c27289902f814\""
time="2021-12-03T12:32:08Z" level=debug msg="No compression detected"
time="2021-12-03T12:32:08Z" level=debug msg="Using original blob without modification"
time="2021-12-03T12:32:08Z" level=info msg="Image copied to oci:///cache/fce63db3af3:latest"
time="2021-12-03T12:32:08Z" level=info msg="Image manifest: {\n    \"schemaVersion\": 2,\n    \"config\": {\n        \"mediaType\": \"application/vnd.oci.image.config.v1+json\",\n        \"digest\": \"sha256:082ce1611057343c54b0c8ac091acf682759cc3123ad20b2e07943c762022838\",\n        \"size\": 2385\n    },\n    \"layers\": [\n        {\n            \"mediaType\": \"application/vnd.oci.image.layer.v1.tar+gzip\",\n            \"digest\": \"sha256:ac56bdc7f9934acede05653e9e01e73e961c31818b522c0732ad35350bb3a82b\",\n            \"size\": 85633977\n        },\n        {\n            \"mediaType\": \"application/vnd.oci.image.layer.v1.tar+gzip\",\n            \"digest\": \"sha256:22f677655049d4c2e6cd9e49ca9ed20f34ac175ef0c82f5c5eabc79031c1c29a\",\n            \"size\": 1876\n        },\n        {\n            \"mediaType\": \"application/vnd.oci.image.layer.v1.tar+gzip\",\n            \"digest\": \"sha256:daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe\",\n            \"size\": 217\n        }\n    ]\n}\n"
time="2021-12-03T12:32:08Z" level=info msg="Layer blobInfo: sha256:ac56bdc7f9934acede05653e9e01e73e961c31818b522c0732ad35350bb3a82b\n"
time="2021-12-03T12:32:08Z" level=info msg="Layer blobInfo: sha256:22f677655049d4c2e6cd9e49ca9ed20f34ac175ef0c82f5c5eabc79031c1c29a\n"
time="2021-12-03T12:32:08Z" level=info msg="Layer blobInfo: sha256:daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe\n"
time="2021-12-03T12:32:08Z" level=info msg="Last layer: daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe"
time="2021-12-03T12:32:08Z" level=info msg="Path to the TarGzipLayer file: /cache/fce63db3af3/blobs/sha256/daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe"
time="2021-12-03T12:32:08Z" level=info msg="Tgz file to be extracted /cache/fce63db3af3/blobs/sha256/daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe"
time="2021-12-03T12:32:08Z" level=info msg="Opening the gzip file: /cache/fce63db3af3/blobs/sha256/daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe"
time="2021-12-03T12:32:08Z" level=info msg="Creating a gzip reader for: /cache/fce63db3af3/blobs/sha256/daccb27e61ff035eb6e466f7a7facae6fd2e4cee6323179bebe430a074c071fe"
time="2021-12-03T12:32:08Z" level=debug msg="File to be extracted: /bye.txt"
time="2021-12-03T12:32:08Z" level=debug msg="File extracted to /bye.txt"
time="2021-12-03T12:32:08Z" level=debug msg="File to be extracted: /good.txt"
time="2021-12-03T12:32:08Z" level=debug msg="File extracted to /good.txt"
time="2021-12-03T12:32:08Z" level=debug msg="File to be extracted: /run"
time="2021-12-03T12:32:08Z" level=debug msg="File to be extracted: /run/.containerenv"
time="2021-12-03T12:32:08Z" level=debug msg="File extracted to /run/.containerenv"
time="2021-12-03T12:32:08Z" level=info msg="File found: /good.txt"
time="2021-12-03T12:32:08Z" level=info msg="File found: /var/lib/containers/storage/vfs/dir/65a8e3d2b0ca135c9efe3174172cc1310a74a02169c1aca302bff13260846771/good.txt"
